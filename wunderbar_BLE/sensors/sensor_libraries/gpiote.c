
/** @file   gpiote.c
 *  @brief  GPIOTE driver.
 *
 *  This contains the driver definitions for the GPIOTE module.
 *
 *  @author MikroElektronika
 *  @bug    No known bugs.
 */
 
/* -- Includes -- */

#include "gpiote.h"

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/** @brief Configure GPIOTE module
 *
 *  @param idx       Interrupt idx to activate.
 *  @param mode      GPIOTE mode.
 *  @param polarity  GPIOTE polarity.
 *  @param init      Initial value of the output when the GPIOTE channel is configured.
 *
 *  @return false in case error occurred, otherwise true.
 */
 
bool gpiote_configure(uint8_t idx, uint8_t pin, GPIOTE_MODE mode, GPIOTE_POLARITY polarity, GPIOTE_OUTINIT init) 
{
		if (idx > 3 || pin > 31) 
    {
				return false;
	  }
		
		GPIOTE_HW->CONFIG[idx] = mode | (pin << 8) | (polarity << 16) | (init << 20);
		return true;
}

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/** @brief Enable an interrupt.
 *
 *  @param idx interrupt idx to activate.
 *
 *  @return Void.
 */

void gpiote_enable_interrupt(GPIOTE_INT_IDX idx) 
{
    GPIOTE_HW->INTENSET |= (1 << idx);
}

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/** @brief Disable an interrupt.
 *
 *  @param idx interrupt idx to deactivate.
 *
 *  @return Void.
 */

void gpiote_disable_interrupt(GPIOTE_INT_IDX idx) 
{
    GPIOTE_HW->INTENCLR |= (1 << idx);
}

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
