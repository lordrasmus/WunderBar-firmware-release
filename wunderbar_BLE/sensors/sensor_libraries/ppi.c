
/** @file   ppi.c
 *  @brief  Programmable Peripheral Interconnect driver.
 *
 *  This contains the driver definitions for the Programmable Peripheral Interconnect module.
 *
 *  @author MikroElektronika
 *  @bug    No known bugs.
 */

/* -- Includes -- */

#include "ppi.h"

#if defined(BLE_STACK_SUPPORT_REQD)
#include "nrf_soc.h"
#endif

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/** @brief Function connects event and task for corresponding chanel.
 *
 *  @param channel  PPI channel.
 *  @param event    Pointer to event register.
 *  @param task     Pointer to task register.
 *
 *  @return Void.
 */
 
void ppi_connect(uint8_t channel, volatile void* event, volatile void* task) 
{
	#if defined(BLE_STACK_SUPPORT_REQD)
		sd_ppi_channel_assign(channel, event, task);
	#else
		PPI_HW->CH[channel].EEP = (uint32_t)event;
		PPI_HW->CH[channel].TEP = (uint32_t)task;
	#endif
}

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/** @brief Function enables PPI chanel.
 *
 *  @param channel  PPI channel to be enabled.
 *
 *  @return Void.
 */

void ppi_channel_set(uint8_t channel) 
{
	#if defined(BLE_STACK_SUPPORT_REQD)
		sd_ppi_channel_enable_set(1 << channel);
	#else
		PPI_HW->CHENSET = 1 << channel;
	#endif
}

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/** @brief Function enables PPI chanel.
 *
 *  @param channel  PPI channel to be enabled.
 *
 *  @return Void.
 */

void ppi_channel_clear(uint8_t channel)
{
	#if defined(BLE_STACK_SUPPORT_REQD)
		sd_ppi_channel_enable_clr(1 << channel);
	#else
		PPI_HW->CHENCLR = 1 << channel;
	#endif
}

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
